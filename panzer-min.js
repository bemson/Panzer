/* Panzer v0.2.5 + genData v2.0.0 | github.com/bemson | (c) 2012, MIT */
;((typeof exports!="undefined"?exports:window).genData=function a(b){function q(a,b){this.name=a,this.value=b}if(this instanceof a)return this;var c,d,e,f=[["",b]],g,h,i,j,k={},l,m,n=[].slice.call(arguments).slice(1).filter(function(a){return typeof a=="function"}),o=n.length,p=[];q.prototype=(typeof this=="function"?this:a).prototype;while(f.length){j=f.shift(),d=new q(j[0],j[1]),c=0,l={omit:0,scan:1,exit:0,parent:0},m=[j[0],j[1],j[2],p,l,k];while(c<o&&!l.exit)n[c++].apply(d,m);l.omit?d._OMIT=!0:p.push(d);if(l.exit)f=[];else{i=[],h=typeof l.parent=="object",g=h?l.parent:d.value;if(l.scan&&typeof g=="object"){for(e in g)g.hasOwnProperty(e)&&i.push([e,g[e],h?g:d]);f=i.concat(f)}}}return p}).spawn=function b(){function d(b){return this instanceof d?this:a.apply(typeof this=="function"?this:d,[b].concat(c,[].slice.call(arguments).slice(1)))}var a=this,c=[].slice.call(arguments).filter(function(a){return typeof a=="function"});return d.prototype=new a,d.spawn=b,d};
!function(a,b,c,d,e,f){function o(a,b,c,e){var f=this;f.panzer=i=a,f.y=[{},{},function(b,c){return b===a?c?(f.pkgs[a.i[c]]||{}).inst||!1:f:j}],a.d.forEach(function(a){var b=a.def.attributeKey,c=a.def.invalidKey;a.c={af:typeof b=="function"?b:0,ar:b&&b instanceof d?b:0,nf:typeof c=="function"?c:0,nr:c&&c instanceof d?c:0}}),f.nodes=l(c),i=0,f.nodes[0].parentIndex=f.nodes[0].childIndex=0,f.nodes.unshift(l()[0]),f.nodes[0].children.push(1),f.nodes[0].name="PNULL",f.nodes[0].index=0,f.nodes[0].depth=0,f.nodes[0].path="..//",f.nodes[0].ctx=1,f.nodes[0].firstChildIndex=f.nodes[0].lastChildIndex=1,f.tank={id:a.c++,currentIndex:0,targetIndex:-1,go:function(a){var b=f.nodes[a];return b&&(f.target=b,f.tank.targetIndex=b.index),f.stop=0,f.go()},stop:function(){return f.stop=1,!!f.loop},post:function(a){switch(typeof a){case"function":return f.posts.push(a)-1;case"number":if(f.posts[a])return f.posts[a]=0,!0}return!1}},f.posts=[],f.current=f.nodes[0],f.target=f.loop=0,f.pkgs=a.d.map(function(a){function c(){}var b={name:a.name,inst:new a.def};return c.prototype=a.proxy.prototype,f.y[0][a.name]=b.proxy=new c,f.y[1][a.name]=b.inst,b.inst.pkgs=f.y[1],b.inst.nodes=m.call(a.node,f.nodes),b.inst.tank=f.tank,typeof a.def.init=="function"&&a.def.init.call(b.inst,e),b}),f.pkgs.forEach(function(a,c,d){a.proxy.pkgs=f.y[0],a.proxy.toString=f.y[2],a.inst.proxy=b}),b.pkgs=f.y[0],b.toString=f.y[2],this.ret=1}function p(a,b){return typeof b=="string"&&a&&this.d[a-1].proxy.prototype[b]||!1}function q(a){var b=this;if(arguments.length){if(typeof a=="string"&&/\w/.test(a)){if(!b.i.hasOwnProperty(a)){function c(c){if(!(this instanceof arguments.callee))return c instanceof b.d[0].proxy&&c.toString(b,a)}c.getSuper=function(a){return p.call(b,this.index,a)},c.init=c.attributeKey=c.invalidKey=c.onBegin=c.onEnd=c.onTraverse=0;function d(){}d.prototype=new b.Y,b.P.prototype=c.proxy=d.prototype,b.Y=d;function e(){}c.node=e.prototype,c.index=b.i[a]=b.d.push({name:a,def:c,proxy:d,node:e})-1}return b.d[b.i[a]].def}return!1}return b.d.map(function(a){return a.name})}if(!a&&e.Panzer)return;var g=a?exports:e,h=(a?require("genData"):e).genData,i,j={}.toString(),k=function(a,b,c){var d=a+"f",f=a+"r";return i.d.some(function(a){if(a.c[d])return a.c[d].call(e,b,c);if(a.c[f])return a.c[f].test(b)})},l=h.spawn(function(a,b,c,d,e,g){var h=this,i=c&&k("n",a,b),j=c&&!i&&k("a",a,b);i||j?(e.omit=1,e.scan=0,j&&!i&&(c.attributes[a]=b)):(h.ctx=h.parentIndex=h.previousIndex=h.nextIndex=h.firstChildIndex=h.lastChildIndex=h.childIndex=f,h.index=d.length+1,h.depth=c?c.depth+1:1,h.name=c?a:"PROOT",h.attributes={},h.path=c?c.path+a+"/":"//",h.children=[],c&&(h.parentIndex=c.index,c.children.length||(c.firstChildIndex=h.index),h.childIndex=c.children.push(h.index)-1,c.lastChildIndex=h.index,h.childIndex&&(h.previousIndex=c.children[h.childIndex-1],d[h.previousIndex-1].nextIndex=h.index)))}),m=h.spawn(function(a,b,c,d,e){if(!c)e.omit=1;else{e.scan=0;for(var f in b)b.hasOwnProperty(f)&&f!=="ctx"&&(this[f]=b[f])}}),n=b.prototype;o.prototype={go:function(){var a=this,b=a.nodes,c=a.tank,d,e=0,f=a.current,g=0,h=0,i;if(a.loop)return!!a.target;a.posts=[],a.loop=1,a.fire("Begin");while(a.loop)a.target&&!a.stop?(i=0,d=a.target.index-f.index,d?d>0&&f.index<2||!a.target.path.indexOf(f.path)?f.ctx?(g=0,h=f.firstChildIndex):(g=1,h=1,f.ctx=1):f.ctx?(g=1,h=2,f.ctx=0):(a.target.path.indexOf(b[f.parentIndex].path)&&(d=-1),h=d<0?4:3,f.lastEvent===2||f.lastEvent===h||f.lastEvent+h===7?(g=0,h=d>0?f.nextIndex:f.previousIndex||f.parentIndex):g=1):(g=1,h=f.ctx?0:1,f.ctx&&(a.target=0,c.targetIndex=-1),f.ctx=1),g?(f.lastEvent=h,e++,a.fire("Traverse",[h])):(f.lastEvent=0,f=a.current=b[h],c.currentIndex=h)):!i&&(a.stop||!a.target)?(i=1,a.fire("End")):a.loop=0;return a.posts.forEach(function(a){a&&a()}),e},fire:function(a,b){var c=this.panzer;if(!this.ret)return;b=b||[],b.unshift(a.toLowerCase()),this.pkgs.forEach(function(d){var e=c.d[c.i[d.name]].def["on"+a];typeof e=="function"&&e.apply(d.inst,b)})}},g.Panzer={version:"0.2.5",create:function(){function b(b,c){if(!(this instanceof arguments.callee))throw new Error("Missing new operator.");new o(a,this,b,typeof c=="object"?c:{})}var a={c:0,d:[],i:{},Y:function(){},P:b};return b.pkg=function(b){return q.apply(a,arguments)},b}}}(typeof require!="undefined",Array,Object,RegExp,this);